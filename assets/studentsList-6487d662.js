import{a as B}from"./addStudent-619b83b1.js";import{g as E}from"./getData-16012ea8.js";import{r as G}from"./RemoveData-bd4d19ab.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{h as c,s as F,b as u,v as P,o as y,c as U,e,i as l,F as j,d as g,j as d,x as q,k as A,f as H,y as S}from"./index-3086d880.js";import"./addData-499d0411.js";function f(h,p){const a=new XMLHttpRequest;a.open("GET",`http://39.98.244.18/api/Manager/GetStu_Info?page=${h}`,!0),a.onload=function(){if(this.status===200){const r=JSON.parse(this.responseText);console.log(r),p(r)}else console.error("请求失败")},a.onerror=function(){console.error("请求出错")},a.send()}const J={class:"header"},O={class:"left"},X={class:"right"},K={class:"demo-pagination-block"},Q={__name:"studentsList",setup(h){const p=c([]),a=c(!1),r=c(0),_=t=>{p.value=t};E("Stu_Count",function(t,o){t?console.error(t):(console.log(typeof Number(o)),r.value=Number(o))}),a.value=!0,setTimeout(()=>{a.value=!1,f(1,_)},800);const b=()=>{a.value=!0,setTimeout(()=>{a.value=!1,f(1,_),S({message:"数据完成刷新.",grouping:!0,type:"success"})},800)},D=t=>{a.value=!0,setTimeout(()=>{a.value=!1,f(t,_)},800),console.log(`${t} items per page`)},k=t=>{a.value=!0,setTimeout(()=>{a.value=!1,f(t,_)},800),console.log(`current page: ${t}`)},v=c(!1),m=c(""),x=F(()=>p.value.filter(t=>!m.value||t.stu_Name.toLowerCase().includes(m.value.toLowerCase()))),I=(t,o)=>{console.log(t,o)};let C;const T=(t,o)=>{console.log(t,o.stu_StuID),C=o.stu_StuID,console.log(C),G(`http://39.98.244.18/api/Manager/Stu_Remove?Stu_ID=${o.stu_StuID}`),S({message:"已删除.",grouping:!0,type:"success"}),b()};return(t,o)=>{const i=u("el-button"),s=u("el-table-column"),V=u("el-input"),N=u("el-table"),$=u("el-pagination"),w=u("el-card"),L=u("el-dialog"),z=P("loading");return y(),U(j,null,[e(w,{class:"guest-container"},{header:l(()=>[g("div",J,[g("div",O,[e(i,{onClick:o[0]||(o[0]=n=>v.value=!0),icon:"Plus",type:"primary"},{default:l(()=>[d(" 添加 ")]),_:1}),e(i,{type:"danger"},{default:l(()=>[d("禁用账户")]),_:1})]),g("div",X,[e(i,{onClick:b,icon:"RefreshRight",type:"primary",plain:!0},{default:l(()=>[d(" 刷新数据 ")]),_:1})])])]),default:l(()=>[q((y(),A(N,{style:{width:"100%"},data:H(x),border:""},{default:l(()=>[e(s,{prop:"stu_ID",label:"序号"}),e(s,{label:"姓名",prop:"stu_Name"}),e(s,{label:"性别",prop:"stu_Gender"}),e(s,{label:"年龄",prop:"stu_Age"}),e(s,{label:"学号",prop:"stu_StuID"}),e(s,{label:"身份证号码",prop:"stu_IdNum"}),e(s,{label:"院系",prop:"stu_Collage"}),e(s,{label:"手机号",prop:"stu_Phone"}),e(s,{align:"right"},{header:l(()=>[e(V,{modelValue:m.value,"onUpdate:modelValue":o[1]||(o[1]=n=>m.value=n),size:"small",placeholder:"Type to search"},null,8,["modelValue"])]),default:l(n=>[e(i,{size:"small",onClick:R=>I(n.$index,n.row),type:"primary"},{default:l(()=>[d("修改")]),_:2},1032,["onClick"]),e(i,{size:"small",type:"danger",onClick:R=>T(n.$index,n.row)},{default:l(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[z,a.value]]),g("div",K,[e($,{background:"",layout:"total, prev, pager, next",total:r.value,class:"mt-10",onSizeChange:D,onCurrentChange:k,"deprecated-warn":"false"},null,8,["total"])])]),_:1}),e(L,{modelValue:v.value,"onUpdate:modelValue":o[2]||(o[2]=n=>v.value=n),title:"学习信息填写"},{default:l(()=>[e(B)]),_:1},8,["modelValue"])],64)}}},ae=M(Q,[["__scopeId","data-v-b9d79ca3"]]);export{ae as default};
