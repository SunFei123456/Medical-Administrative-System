import{g as L}from"./getData-16012ea8.js";import{r as R}from"./RemoveData-bd4d19ab.js";import{_ as B}from"./_plugin-vue_export-helper-c27b6911.js";import{h as _,s as E,b as i,v as F,o as h,c as S,e as a,i as n,F as z,d as M,j as m,x as U,k as j,f as q,y as b}from"./index-3086d880.js";const p=(g,c)=>{const l=new XMLHttpRequest;l.open("GET",`http://39.98.244.18/api/Manager/GetMed_Info?page=${g}`,!0),l.onload=function(){if(this.status===200){const u=JSON.parse(this.responseText);c(u)}else console.error("请求失败")},l.onerror=function(){console.error("请求出错")},l.send()};const H={class:"header"},J={class:"demo-pagination-block"},O={__name:"drugList",setup(g){const c=_(!1),l=_([]),u=_(""),f=_(0),d=_(!1);L("Med_Count",function(t,e){t?console.error(t):(console.log(typeof Number(e)),f.value=Number(e))});const D=t=>t,y=()=>{d.value=!0,v(1),setTimeout(()=>{b({message:"数据完成刷新.",grouping:!0,type:"success"})},1e3)};p(1,function(t){d.value=!0;for(let e of t){let o={Med_ID:e.med_Id,Med_Name:e.med_Name,Med_Price:e.med_Price,Med_GuiGe:e.med_Desc};setTimeout(()=>{l.value.push(o),d.value=!1},1e3)}});const v=t=>{d.value=!0,setTimeout(()=>{l.value=[],d.value=!1,p(t,function(e){for(let o of e){let s={Med_ID:o.med_Id,Med_Name:o.med_Name,Med_Price:o.med_Price,Med_GuiGe:o.med_Desc};l.value.push(s)}})},800),console.log(`${t} items per page`)},C=t=>{d.value=!0,setTimeout(()=>{l.value=[],d.value=!1,p(t,function(e){for(let o of e){let s={Med_ID:o.med_Id,Med_Name:o.med_Name,Med_Price:o.med_Price,Med_GuiGe:o.med_Desc};l.value.push(s)}})},800),console.log(`current page: ${t}`)},x=(t,e)=>{console.log(t,e)},N=(t,e)=>{console.log(t,e),R(`http://39.98.244.18/api/Manager/Med_Remove?Med_ID=${e.Med_ID}`),b({message:"已删除.",grouping:!0,type:"success"})},k=E(()=>l.value.filter(t=>{var e;return!u.value||((e=t==null?void 0:t.Med_Name)==null?void 0:e.toLowerCase().includes(u.value.toLowerCase()))}));return(t,e)=>{const o=i("el-button"),s=i("el-table-column"),I=i("el-input"),G=i("el-table"),V=i("el-pagination"),T=i("el-card"),$=i("el-dialog"),w=F("loading");return h(),S(z,null,[a(T,{class:"guest-container"},{header:n(()=>[M("div",H,[a(o,{onClick:e[0]||(e[0]=r=>c.value=!0),icon:"Plus",type:"primary"},{default:n(()=>[m(" 添加 ")]),_:1}),a(o,{type:"danger"},{default:n(()=>[m("禁用账户")]),_:1}),a(o,{onClick:y,icon:"RefreshRight",type:"primary",plain:!0},{default:n(()=>[m(" 刷新数据 ")]),_:1})])]),default:n(()=>[U((h(),j(G,{data:q(k),style:{width:"100%"},border:""},{default:n(()=>[a(s,{label:"药品ID",type:"index",index:D()},null,8,["index"]),a(s,{label:"药品名称",prop:"Med_Name"}),a(s,{label:"药品价格",prop:"Med_Price"}),a(s,{label:"药品规格",prop:"Med_GuiGe"}),a(s,{align:"right"},{header:n(()=>[a(I,{modelValue:u.value,"onUpdate:modelValue":e[1]||(e[1]=r=>u.value=r),placeholder:"请输入要搜索药品的名称"},null,8,["modelValue"])]),default:n(r=>[a(o,{type:"primary",onClick:P=>x(r.$index,r.row)},{default:n(()=>[m("修改")]),_:2},1032,["onClick"]),a(o,{type:"danger",onClick:P=>N(r.$index,r.row)},{default:n(()=>[m("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[w,d.value]]),M("div",J,[a(V,{background:"",layout:"total, prev, pager, next",total:f.value,class:"mt-10",onSizeChange:v,onCurrentChange:C,"deprecated-warn":"false"},null,8,["total"])])]),_:1}),a($,{modelValue:c.value,"onUpdate:modelValue":e[2]||(e[2]=r=>c.value=r),title:"学习信息填写"},null,8,["modelValue"])],64)}}},W=B(O,[["__scopeId","data-v-80bc8e64"]]);export{W as default};
